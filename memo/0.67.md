# 0.67 æ˜æš—ãƒ¢ãƒ¼ãƒ‰ã‚’å®Ÿè£…ã™ã‚‹

ã€€èƒŒæ™¯è‰²ã‚’é»’ã«ã™ã‚‹ã“ã¨ã§ç›®ã«ã‚„ã•ã—ãã™ã‚‹ã€‚ï¼ˆå¤œã«ç™½ãªã©å¼·ã„å…‰ã‚’å¤šãæµ´ã³ã‚‹ã¨çœ ã‚Œãªããªã£ãŸã‚Šç›®ãŒç—›ããªã‚‹ï¼‰

[prefers-color-scheme]:https://developer.mozilla.org/ja/docs/Web/CSS/@media/prefers-color-scheme

## æ¦‚è¦

ã€€OSã®ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã«åˆã‚ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚å¤‰æ›´ã‚’ãƒ•ãƒƒã‚¯ã™ã‚‹JSã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã¨CSSã®ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¯ã‚¨ãƒªãŒã‚ã‚‹ã€‚

## å•é¡Œ

ã€€JSã§å‹•çš„ã«å¤‰æ›´ã§ããªã„ã€‚ãã®ã›ã„ã§åŒã˜å‡¦ç†ã‚’é‡è¤‡ã—ã¦æ›¸ã‹ã­ã°ãªã‚‰ãªã„ã‚¯ã‚½ä»•æ§˜ã€‚ä»¥ä¸‹ã§ãã‚Œã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚ã‚‹ã€‚

* https://github.com/GoogleChromeLabs/dark-mode-toggle

ã€€çµå±€ã€ã“ã‚Œã¾ã§ã¨åŒã˜CSSã§classæŒ‡å®šã—ã€ãã‚Œã‚’JSã§å¤‰æ›´ã™ã‚‹ã“ã¨ã§è¤‡æ•°ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä¸€æ‹¬å¤‰æ›´ã™ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ãªã‚‹ã€‚ãƒ€ã‚µã„ã€‚ãã‚Œè‡ªä½“ãŒDRYã«æ›¸ã‘ãªã„ã®ã§ãƒ€ã‚µã„ã€‚

## åå‰

* theme
* look & feel
* color-scheme
* light/dark mode
* morning/night mode

ã€€CSSãƒ¡ãƒ‡ã‚£ã‚¢ã‚¯ã‚¨ãƒª[prefers-color-scheme][]ã«å€£ã£ã¦`color-scheme`ã¨ã™ã‚‹ã€‚

```css
:root {
    --background-color: white;
    --color: black;
    --a-color: blue;
    --sub-font-color: #666666;
}
body {
    background-color: var(--background-color);
    color: var(--color);
}
a { color: var(--a-color); }
#page-header, #page-footer {
    color: var(--sub-font-color);
}
```
```javascript
// OSã®ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¤‰æ›´ã«åˆã‚ã›ã‚‹
window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
    const COLOR_SCHEME = document.getElementById('color-scheme');
    COLOR_SCHEME.value = event.matches ? 'dark' : 'light';
    COLOR_SCHEME.innerText = event.matches ? 'ğŸŒ™' : 'â˜€';
    document.querySelector(':root').style.setProperty('--color-scheme', COLOR_SCHEME.value)
});
```
```javascript
// ãƒœã‚¿ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆã§å¤‰æ›´ã™ã‚‹
document.getElementById('color-scheme').addEventListener("click", function (e) { // ãƒœã‚¿ãƒ³æŠ¼ä¸‹æ™‚ã«å¤‰æ›´ã™ã‚‹
    //window.matchMedia('(prefers-color-scheme: dark)').dispatchEvent(new Event('change'));
    //console.log(`æ˜æš—ãƒœã‚¿ãƒ³æŠ¼ä¸‹:${e.target.value}`);
    const STYLE = document.querySelector(':root').style;
    function css(key) { return getComputedStyle(document.querySelector(':root')).getPropertyValue(key); }
    if ('light' === e.target.value) {
        STYLE.setProperty('--color-scheme', 'dark')
        STYLE.setProperty('--background-color', 'black')
        STYLE.setProperty('--color', 'white')
        STYLE.setProperty('--a-color', 'yellow')
        STYLE.setProperty('--sub-font-color', '#CCCCCC')
        e.target.value = 'dark';
        e.target.innerText = 'ğŸŒ™';
    } else {
        STYLE.setProperty('--color-scheme', 'light')
        STYLE.setProperty('--before-background-color', css('--background-color'))
        STYLE.setProperty('--background-color', 'white')
        STYLE.setProperty('--after-background-color', css('--background-color'))
        STYLE.setProperty('--color', 'black')
        STYLE.setProperty('--a-color', 'blue')
        STYLE.setProperty('--sub-font-color', '#666666')
        e.target.value = 'light';
        e.target.innerText = 'â˜€';
    }
});
```

ã€€å€¤ã‚’ã‚»ãƒƒãƒˆã™ã‚‹å‡¦ç†ãŒã‚ã‚‰ã‚†ã‚‹ç®‡æ‰€ã§é‡è¤‡ã—ã¦ã„ã‚‹ã€‚ã“ã‚ŒãŒè¶…çµ¶ã«ãƒ€ã‚µã„ã€‚

## ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

ã€€ã„ããªã‚Šç™½ï¼é»’ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã¨ç›®ãŒç—›ã„ã€‚ãã“ã§ç·©ã‚„ã‹ã«å¤‰åŒ–ã•ã›ã¦ã¿ãŸã€‚ã„ã„æ„Ÿã˜ã€‚

```css
body {
    transition: background-color 2s linear;
}
```

ã€€æ–‡å­—è‰²ã‚‚ä¸€ç·’ã«å¤‰æ›´ã™ã‚‹ã¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚«ã‚¯ã‚«ã‚¯ã«ãªã‚‹ã—ã€ä¸€ç¬ç°è‰²ä¸€è‰²ã«ãªã£ã¦ãƒ€ã‚µã„ã€‚èƒŒæ™¯ã®ã¿ã‚’ã‚¢ãƒ‹ãƒ¡ã•ã›ã‚‹ã®ãŒæœ€é©è§£ã€‚

