# ブラウザが表示できる最小フォントより小さい「字／行」を入力できないようにしたい

## 結果

* https://ytyaru.github.io/Html.CSS.WritingMode.LocalStorage.20211229153330/0.3/index.html

　最小フォントサイズを10pxとし、最大字数／行を算出することで解決した。このとき、画面の向き（縦置き／横置き）や、WritingMode（縦書き／横書き）が変化したときのイベントをフックして最大字数／行を算出しなおし、`input range`の`max`値にセットしている。

## 原因

　各ブラウザには最小フォントが定められている。それは`9px`や`10px`などバラバラ。いずれにせよ、拡大縮小しようが、CSSで設定しようが、それ以上は小さくならない値が定められている。

### 問題

　私の設定した「字／行」も同じだ。デベロッパーツールの`Galaxy S5`360ピクセル幅にて、40字／行にすると、10pxより小さくなるはず。なのに表示上は36字／行になっている。なぜなら最小フォントサイズが`10px`だから。360px / 10px = 36字。

## 対処

　ならもう、最小フォントサイズを`10px`と決め打ちし、JSにて最大字数／行を算出してしまおう。それをHTMLのinput rangeのmaxにセットした。

### メモ

　デベロッパツールでスマホの回転を再現できる。consoleにログが出力され、正しく値が出力されることが確認できるはず。

最大字数／行|
------------|
全角／半角|全角なら`40`、半角なら`80`が好ましい。スマホは小さいため全角`20`。ユーザが以下の範囲内において自由にセットできる。
初期値|前回終了時値をLocalStorageから取得する。ないならメディアクエリで決め打ち。599px以下なら`20`, 1024px以下なら`30`、1025px以上なら`40`。
最小値|スマホなら`10`〜`15`。PCなら`20`〜`25`。メディアクエリで決め打ち。
最大値|ブラウザが規定する最小フォントサイズ`9px`/`10px`がある。これに倣って`10px`として算出する。画面の向き、WritingMode、解像度から。

