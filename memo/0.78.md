# 0.78 

## 考察（UIの使いづらさ）

* 全体
* dialog
* button
* input
    * range
    * checkbox

### 全体

* フォーカス移動。ダイアログ内でループしてほしいのにブラウザ側へ行ってしまう
* フォーカスがあたっているUIがどれなのかわかりにくい

#### フォーカス遷移

　アプリにしないと制御できない。ブラウザ内に表示されたWEBサイトという扱いのままだと、どうしてもブラウザの開発者ツールなどにもフォーカスが行ってしまう。PWAにするなど大掛かりな対策が必要か。

* https://developer.mozilla.org/ja/docs/Web/Progressive_web_apps

#### ハイライト

　ハイライトについてはよく考察する必要がありそう。考慮すべき項目が非常に多く、さらにそれらに適切な配色をせねばならない。非常にむずかしい仕事になるだろう。

* ライト／ダーク
* UIの状態（チェック済み（選択中）、非チェック（非選択）、操作不可（ディザブル）、フォーカス、マウスホバー）
* 情報の意味（背景色、メイン文字色、サブ文字色（弱表示）、強調表示色、見出し）

　配色について考える必要がある。ベース70%、メイン25%、アクセント5%の３カラーは必須か。

　試しに変数を用意してみる。状態を擬似クラスで指定するため、それを知ることが重要だと判明した。

```css
:root {
    --background-color: #FFFFFF;
    --foreground-color: #000000;
}
/* 疑似クラスにより様々な対象を配色する */
:focus, :hover, :active { /* キーボード操作対象。マウスが上に乗っている時。タッチ（マウスボタン押下）中時 */
    --background-color: #000000;
    --foreground-color: #FFFFFF;
}
:disabled {
    --background-color: #FFFFFF;
    --foreground-color: #AAAAAA;
}
:checked, :selected {
    --background-color: #FFFFFF;
    --foreground-color: #000000;
}
/* :link + :visited */
:any-link {
    --background-color: #FFFFFF;
    --foreground-color: #0000FF;
}
:any-link:focus, :any-link:hover {
    --background-color: #FFFF00;
    --foreground-color: #0000FF;
}

:target { /* アンカーリンクにヒットする（URLが「https://.../index.html#section-1」のとき要素<section id="section-1">を選択する） */

}
:focus-visible {} /* キーボード操作によりフォーカスされたときのみ反応する */
:focus-within {} /* 自分または子孫にフォーカスがある時 */

/* カスタム要素などロードが遅いとき用 */
some-custom:define { display:block; }
some-custom:not(:define) { display:none; }

:fullscreen {}



/* 以下入力系 */
/* autofill */
/* enabled, disabled */
/* read-write, readonly */
/* :placeholder-shown */
/* :default */
/* :checked, :selected */
/* :indeterminate 未確定, :blank */
/* :valid, :invalid */
/* :in-range, :out-of-range */
/* :required, :optional */


```

* https://coliss.com/articles/build-websites/operation/css/target-pseudo-class-trick.html

### dialog

　`<dialog>`を使っているが、これがひどい。

* 表示位置を思い通りにできない。やろうとすると閉じるときに位置が初期値に戻ってしまいアニメーションのとき酷いことになる

### button

　現状ボタンで実装しているものはすべて２値スイッチである。もっとふさわしい表現があるはず。たとえばElement+のSwitchなど。

* フルスクリーン／ウインドウド
* 縦書き／横書き
* ライト／ダーク

### input range

　全然ダメ。

* 縦書きにする方法がブラウザごとに違う
* 縦書きにするとキーボード操作できなくなる
* ある地点へのラベル（値）を表示したい（最小、最大、中間、任意など）
* ある地点へのリンクができない（クリックするとその値にセットしてくれる）
* 現状の値がいくつなのかわからない
* ラベル実装が面倒

# UIについて

　値の種類によって適切な表示が異なる。

* 2値
* 3値
* 4値
* 5値
* 6値
* 7値
* 8値
* 9値
* 10値
* それ以上ある。または型が決まっている
* 先頭〜末尾までの範囲がある
* 範囲はループする
* 自由

　次のような形がありうる。

* スイッチ（左右、上下、表裏）
* 扇形スイッチ（3値以上で回転・ループするイメージ。すべての値を一覧できずとも各値に想像がつく程度の数と明確さがある場合に使用）
* 円形セレクタ（全値が円形状に並ぶ。5つ以上など多めのときに使用する。各値はアイコンで表示し、フォーカスがあたると名前が表示される）
* 構造スケーラ（抽象／具象を表す。ブロックが内包されて包含関係を表す。パンくずリストで先祖階層を表す）
* ピラミッド（構造スケーラに階層軸だけでなく兄弟軸への順序付けもしたもの。かつ全階層展開）

　数が多かったり、型が違うと階層構造で導くことになる。ユーザとしては選別する必要が出てくるため頭に負荷がかかるし、手作業が増えるため入力コストも増す。できればそのように大量の分岐をせずに済むほうが嬉しい。すなわち適切なデフォルト値の提示だ。

　なので優先度は入力パターンが少ないもののほうが高い。もし実装するなら2値スイッチからだろう。

## 2値

* ON/OFF
* 自由（明暗、フルスクリーン／ウインドウド、縦書き／横書き等）

　表現タイプはいくつかある。以下のようなスイッチ型。ポッチの位置（左右）でON/OFFを表現する。

```
🔴⊃
```
```
⊂◯
```

　以下のようなボタン型。凹凸でON/OFFを表現する。ラベル一体型であり、ポッチやチェックボックスを省略した形でもある。コンボボックスの2値型ともいう。

```
[ 文字列 ]
[ 画像 ]
```

　ボタン型の問題は表示されているのは現状値なのか、それとも押したときに変化する未来値なのか、どちらであるかわからないこと。ふつうのスイッチは現状値の表示のはずである。それが直感的だ。しかしそれだと、そのボタンを押したら何がどうなるのかわからない。なのでYoutubeのフルスクリーンスイッチは現状値ではなく、押したときどうなるかの未来値をアイコンで表示している。再生と停止も同じ。再生中は`▶`ではなく一時停止`⏸️`だったりする。

```
[ 押したらこうなる ]

[ ▶ ] 現在停止中。押したら再生される。
[ ⏸️ ]  現在再生中。押したら一時停止する。
[ ⚙ ]  現在未表示。押したら設定ダイアログが表示される。
```

　独自WebComponentを作るなら以下のような段階を踏むのが良い。

1. JSの生API WebComponent
1. Vue.js

　Vue.jsはRiot.jsの上位互換。

